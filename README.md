# Query Train

## README.md
[English](README_en.md)

## é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®ä½¿ç”¨Next.Jsæ¡†æ¶æ­å»ºå‰ç«¯æœåŠ¡ï¼Œä½¿ç”¨FastApiæ­å»ºåç«¯æœåŠ¡ï¼Œä½¿ç”¨scrapy+playwrightå®ç°ä¸šåŠ¡é€»è¾‘ï¼šä»[é“è·¯12306](https://www.12306.cn/index/)çˆ¬å–æŒ‡å®šå‡ºå‘åœ°ï¼Œç›®çš„åœ°ä¸æ—¥æœŸçš„å®æ—¶ç¥¨åŠ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€˜ç›´è¾¾åˆ—è½¦â€™å’Œâ€˜ä¸­è½¬åˆ—è½¦â€™ä¸¤ç±»ç¥¨åŠ¡ä¿¡æ¯ã€‚é¡¹ç›®ä½¿ç”¨åˆ°çš„æŠ€æœ¯æœ‰

* Next.Jså®ç°å‰ç«¯æœåŠ¡
* FastApiæ­å»ºåç«¯api
* scrapyå®ç°çˆ¬è™«ä¸šåŠ¡
* playwrightæ— å¤´æµè§ˆå™¨æ¨¡æ‹Ÿ
* sqliteç¥¨åŠ¡ä¿¡æ¯ä¸´æ—¶å­˜å‚¨

## é¡¹ç›®ç»“æ„

### front-end

ä¸ºå‰ç«¯æœåŠ¡æ–‡ä»¶å¤¹ï¼Œç»“æ„å¦‚ä¸‹ï¼š

.

â”œâ”€â”€ public

â””â”€â”€ src

  â”œâ”€â”€ actions    ï¼ˆæœåŠ¡å™¨æ“ä½œï¼‰

  â”œâ”€â”€ app     (é¡µé¢è·¯ç”±)

  â”œâ”€â”€ components      ï¼ˆç»„ä»¶ï¼‰

  â”‚  â”œâ”€â”€ footer

  â”‚  â”œâ”€â”€ header

  â”‚  â”œâ”€â”€ query-form

  â”‚  â”œâ”€â”€ trains-list

  â”‚  â”‚  â”œâ”€â”€ trains-change

  â”‚  â”‚  â””â”€â”€ trains-direct

  â”‚  â””â”€â”€ ui

  â””â”€â”€ lib    ï¼ˆæ•°æ®åº“æ–¹æ³•ï¼‰



### back-end

ä¸ºåç«¯æœåŠ¡æ–‡ä»¶å¤¹ï¼Œç»“æ„å¦‚ä¸‹ï¼š

.

â”œâ”€â”€ crawl.py     ï¼ˆçˆ¬è™«å¯åŠ¨æ–¹æ³•ï¼‰

â”œâ”€â”€ main.py      ï¼ˆapiè·¯ç”±ï¼‰

â”œâ”€â”€ scrapy.cfg

â”œâ”€â”€ scrapy_12306    ï¼ˆscrapyé¡¹ç›®æ–‡ä»¶ï¼‰

â”‚  â”œâ”€â”€ __init__.py

â”‚  â”œâ”€â”€ items.py

â”‚  â”œâ”€â”€ middlewares.py

â”‚  â”œâ”€â”€ pipelines.py

â”‚  â”œâ”€â”€ settings.py

â”‚  â””â”€â”€ spiders

â”‚    â”œâ”€â”€ __init__.py

â”‚    â”œâ”€â”€ trains_change.py

â”‚    â””â”€â”€ trains_direct.py

â”œâ”€â”€ trains_change.json      ï¼ˆç›´è¾¾åˆ—è½¦ä¸´æ—¶å­˜å‚¨ï¼‰

â”œâ”€â”€ trains_direct.json         ï¼ˆä¸­è½¬åˆ—è½¦ä¸´æ—¶å­˜å‚¨ï¼‰

â””â”€â”€ utils

  â”œâ”€â”€ get_station_name.py

  â””â”€â”€ station.json

## éƒ¨ç½²æ–¹æ³•

1. æŠŠé¡¹ç›®pullåˆ°æœ¬åœ°

   ```git pull https://github.com/Xuezhihengg/QueryTrain.git```

2. è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹	

   ```cd QueryTrain```

3. éƒ¨ç½²å‰ç«¯æœåŠ¡

   è¿›å…¥å‰ç«¯é¡¹ç›®æ–‡ä»¶å¤¹

   ```cd front_end```

   å®‰è£…ä¾èµ–

   ```npm install```

   å¯åŠ¨å‰ç«¯æœåŠ¡

   Next.Jsæ”¯æŒå¼€å‘æ¨¡å¼(dev)å’Œç”Ÿäº§æ¨¡å¼ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§æ¨¡å¼çš„éƒ¨ç½²ï¼š

   * å¼€å‘æ¨¡å¼

     ç›´æ¥è¿è¡Œ ```npm run dev```

   * ç”Ÿäº§æ¨¡å¼

     å…ˆæ‰“åŒ…æ„å»ºé¡¹ç›® ```npm run build```

     ç„¶åæœ¬åœ°éƒ¨ç½² ```npm start```

   éƒ¨ç½²å®Œæˆåå¯åœ¨æœ¬åœ°http://localhost:3000ï¼ˆé»˜è®¤ï¼‰æŸ¥çœ‹å‰ç«¯æœåŠ¡

4. éƒ¨ç½²åç«¯æœåŠ¡ 

   è¿›å…¥åç«¯é¡¹ç›®æ–‡ä»¶å¤¹

   ```cd -```

   ```cd back_end```

   å®‰è£…ä¾èµ–

   ```pip install reqirements.txt```

   æ³¨æ„ï¼šå¦‚æœå‡ºç°ä¸€äº›ä¾èµ–é¡¹æœªå®‰è£…è€ŒæŠ¥é”™ï¼Œè¯·ä»”ç»†é˜…è¯»æç¤ºä¿¡æ¯å®Œæˆç›¸å…³ä¾èµ–é¡¹çš„å®‰è£…

   è¿è¡Œåç«¯apiæœåŠ¡

   ```fastapi dev```

   éƒ¨ç½²å®Œæˆåå¯åœ¨æœ¬åœ°http://127.0.0.1:8000/docs ï¼ˆé»˜è®¤ï¼‰æŸ¥çœ‹åç«¯apiæ–‡æ¡£

5. ä½¿ç”¨QueryTrain

   è®¿é—®æœ¬åœ°http://localhost:3000

   åœ¨æŸ¥è¯¢æ éƒ¨åˆ†éœ€è¦æ³¨æ„ï¼šæ—¥æœŸæ ¼å¼å¿…é¡»ä¸ºâ€˜YYYY-MM-DDâ€™ï¼Œä¾‹å¦‚â€˜2024-06-05â€™

   ![](https://raw.githubusercontent.com/Xuezhihengg/Blog_images/main/202406041227094.png)

   ç‚¹å‡»æŸ¥è¯¢åç­‰å¾…åå°è¿”å›ç¥¨åŠ¡ä¿¡æ¯ï¼Œç”±äºä¿¡æ¯æ˜¯ä»é“è·¯12306å®æ—¶çˆ¬å–çš„ï¼Œæ¯æ¬¡éœ€è¦ç­‰å¾…å¤§çº¦20sğŸ˜“

   è½¦æ¬¡åˆ—è¡¨æœ‰ä¸¤éƒ¨åˆ†ï¼š

   * ç›´è¾¾åˆ—è½¦ä¿¡æ¯
   * ä¸­è½¬åˆ—è½¦ä¿¡æ¯ï¼ˆå‘ä¸‹æ»‘ï¼‰

![](https://raw.githubusercontent.com/Xuezhihengg/Blog_images/main/202406041230594.png)

![](https://raw.githubusercontent.com/Xuezhihengg/Blog_images/main/202406041230006.png)

æ‚¬æµ®åœ¨ä¿¡æ¯å¡ä¸Šå¯æŸ¥çœ‹å…·ä½“ç¥¨åŠ¡ä¿¡æ¯![](https://raw.githubusercontent.com/Xuezhihengg/Blog_images/main/202406041231706.png)

![](https://raw.githubusercontent.com/Xuezhihengg/Blog_images/main/202406041232218.png)
